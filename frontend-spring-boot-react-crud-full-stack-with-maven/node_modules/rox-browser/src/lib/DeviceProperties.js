import RoxBase from 'rox-base';
import Manifest from '../manifest';
import RoxCache from './RoxCache';
import uuid from 'uuid-browser/v4';

const { DeviceProperties: DevicePropertiesBase } = RoxBase;
const { api_version, lib_version } = Manifest;

class DeviceProperties extends DevicePropertiesBase {
  getProperties() {
    const { distinct_id, app_release, platform } = this;
    return {
      app_release,
      api_version,
      lib_version,
      distinct_id,
      screen_width: window.screen.width,
      screen_height: window.screen.height,
      platform,
      customSigningCertificate: '5659eb0ca47811395ef85f0b09be63b7',
      language: navigator.language,
      anticache: +Date.now()
    };
  }
}

export default new DeviceProperties(RoxCache, uuid);
